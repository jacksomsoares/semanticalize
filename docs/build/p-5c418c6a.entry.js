import{r as t,h as e,H as s}from"./p-29e80129.js";class i{constructor(){this.rotulo=" ",this.contagemTerminais=new Array,this.terminalDependentes=new Array,this.valorDependencia=new Map}}class r{constructor(t){this.abcdario=this.genCharArray("A","Z"),this.producao=new Map;let e=t;e=e.replace(/ /g,""),e=e.replace(/\s\s/g,"\n"),e=e.replace(/\s$/g,"");let s=e.split(/\s/),i=s[0].replace(/\w=[(]|[)]$/g,""),r=i.split(",");this.inicioProd=r[r.length-1],i=i.replace(/\},\w.*/g,"}"),i=i.replace(/\},\{/g,"}\n{"),i=i.replace(/\{/g,""),i=i.replace(/\}/g,"");let l=i.split("\n");this.naoTerminais=l[0].split(","),this.terminais=l[1].split(","),s.forEach((t=>{if(t.includes("->")){let e=t.split("->");this.producao.set(e[0],e[1])}})),this.removerABC(null,this.naoTerminais)}nextChar(t){return String.fromCharCode(t.charCodeAt(0)+1)}genCharArray(t,e){for(var s=[],i=t.charCodeAt(0),r=e.charCodeAt(0);i<=r;++i)s.push(String.fromCharCode(i));return s}IdentificaSentencaMinima(t){let e=t[0];return t.forEach((t=>{t.length<e.length&&(e=t)})),console.log("A sentenca minima encontrda foi:"+e),e}gerarSentencas(t){let e=t,s=this.producao.get(this.inicioProd).split("|"),i=new Array,r=new Date(Date.now()+36e3).getTime();for(let t=0;t<e;t++){if(Date.now()>r){console.log("Tempo limite do programa atingido");break}let e=s[Math.floor(Math.random()*(s.length-0))+0],l=!1,o=!1;for(;!o;){o=!0;let t=new Date(Date.now()+12e3).getTime();for(let s=0;s<this.naoTerminais.length;s++){let i=this.naoTerminais[s];if(e.includes(i)){o=!1;let t=this.producao.get(i).split("|");e=e.replace(i,t[Math.floor(Math.random()*(t.length-0))+0]);break}if(Date.now()>t){console.log("Demorou demais para gerar uma amostra"),o=!0,l=!0;break}}}l?t--:(e=e.replace("&",""),i.includes(e)?t--:i.push(e))}return i}gerarLinguagem(t){let e=new Array,s=null;this.terminais.forEach((t=>{s=new i,s.terminal=t,e.push(s)}));for(let i of t){let t=i;for(let i of this.terminais){for(let t of e)if(t.terminal===i){s=t;break}let r=0;if(t.includes(i)){for(;t.includes(i);)t=t.replace(i,""),r++;s.contagemTerminais.push(r)}else s.contagemTerminais.push(r)}}for(let t of e){let e=0,s=0,i=0,r=0,l=!1;for(let r of t.contagemTerminais)l||(s=r,l=!0),e<r&&(e=r),s>r&&(s=r),i+=r;r=i/t.contagemTerminais.length,console.log("O termina "+t.terminal+" tem o valor max/min/total/media: "+e+" "+s+" "+i+" "+r),t.valorMin=s}let r=this.nextChar("m");for(let t=0;t<e.length;t++){let s=e[t];for(let i=t+1;i<e.length;i++){let l=e[i],o=!1,n=!1,h=s.contagemTerminais[0]-l.contagemTerminais[0];h<0&&(n=!0,h=l.contagemTerminais[0]-s.contagemTerminais[0]);for(let i=1;i<e[t].contagemTerminais.length;i++)if(n){if(l.contagemTerminais[i]-s.contagemTerminais[i]!=h){o=!1;break}o=!0}else{if(s.contagemTerminais[i]-l.contagemTerminais[i]!=h){o=!1;break}o=!0}o&&(s.terminalDependentes.push(l),s.valorDependencia.set(l,h)," "===l.rotulo&&(l.rotulo=r))}" "===s.rotulo&&(s.rotulo=r,r=this.nextChar(r))}let l="",o="";for(let t of e){console.log("--------------------------"),console.log("O terminal "+t.terminal+" depende de:");let s=t.rotulo;for(let i of e)if(i.terminalDependentes.includes(t)){s=s+"-"+i.valorDependencia.get(t);break}l=l+t.terminal+"("+s+") ";for(let e of t.terminalDependentes)console.log(e.terminal),console.log("O valor de dependendia é -"+t.valorDependencia.get(e));console.log("O rotulo deste terminal é "+t.rotulo),console.log("E o valor minimo deste terminal é: "+t.valorMin),console.log("--------------------------")}let n=new Map;for(let t of e)(null==n.get(t.rotulo)||n.get(t.rotulo)<t.valorMin)&&n.set(t.rotulo,t.valorMin);n.forEach(((t,e)=>{o=o+e+">="+t+" "}));let h="Linguagem: L(G)={ "+l+" | "+o+"}";return console.log(h),h}encontrarValorMinimo(t){let e=0,s=0,i=0,r=0,l=!1;for(let r of t)l||(s=r,l=!0),e<r&&(e=r),s>r&&(s=r),i+=r;return r=i/t.length,console.log("O termina tem o valor max/min/total/media: "+e+" "+s+" "+i+" "+r),s}removerABC(t,e){if(null===t){for(let t=0;t<this.abcdario.length;t++)for(let s=0;s<e.length;s++)if(this.abcdario[t]===e[s]){const e=this.abcdario.indexOf(this.abcdario[t]);this.abcdario.splice(e,1)}}else for(let e=0;e<this.abcdario.length;e++)if(this.abcdario[e]===t){const t=this.abcdario.indexOf(this.abcdario[e]);this.abcdario.splice(t,1)}}isNT(t){for(let e=0;e<this.naoTerminais.length;e++)if(t===this.naoTerminais[e])return!0;return!1}isT(t){for(let e=0;e<this.terminais.length;e++)if(t===this.terminais[e])return!0;return!1}}class l{constructor(t){let e;this.first=new Map,e=t.producao.keys();for(let s=0;s<t.producao.size;s++){let s=e.next().value;this.first.set(s,this.findFirst(t,s).substring(1))}}findFirst(t,e){let s,i,r="";i=t.producao.get(e).split("|");for(let e=0;e<i.length;e++)s=i[e].split("")[0],"&"==s||t.isT(s)?r+=","+s:r=this.findFirst(t,s);return r}exibirFirsts(){let t,e="",s=this.first.keys();for(let i=0;i<this.first.size;i++)t=s.next().value,e+="FIRST("+t+") = {"+this.first.get(t)+"}\n";return e}}const o=class{constructor(e){t(this,e)}doFirst(){this.grammarGerada=new r(this.grammar),this.first=new l(this.grammarGerada),this.firstText.value=this.first.exibirFirsts()}render(){return e(s,null,e("button",{class:"btn btn-outline-dark",onClick:()=>this.doFirst()},"First"),e("div",{class:"form-group"},e("label",{htmlFor:"input-first"},"FIRST:"),e("textarea",{class:"form-control",ref:t=>this.firstText=t,rows:5,id:"input-first"})))}};class n{constructor(t){let e;this.follow=new Map,e=t.producao.keys();for(let s=0;s<t.producao.size;s++){let s=e.next().value;this.follow.set(s,this.findFollow(t,s).replace(/&/g,"").replace(/,/g,"").split("").join(","))}}findFollow(t,e){let s,i,r,o=t.producao.keys(),n="",h=!1,a=new l(t),c=!1;t.inicioProd==e&&(n+="$",h=!0);for(let l=0;l<t.producao.size;l++){s=o.next().value,c=!1,r=t.producao.get(s).split("|");for(let l=0;l<r.length;l++)i=r[l].charAt(r[l].indexOf(e)+1),r[l].includes(e)&&("|"==i||""==i?e!=s&&(c=!0,n+=this.findFollow(t,s)):t.isT(i)?n+=i:n=a.findFirst(t,i),t.producao.get(s).includes("&")&&!c&&e!=s&&(c=!0,n+=this.findFollow(t,s)))}return h?(h=!1,n):n}exibirFollows(){let t,e="",s=this.follow.keys();for(let i=0;i<this.follow.size;i++)t=s.next().value,e+="FOLLOW("+t+") = {"+this.follow.get(t)+"}\n";return e}}const h=class{constructor(e){t(this,e)}doFollow(){this.grammarGerada=new r(this.grammar),this.follow=new n(this.grammarGerada),this.followText.value=this.follow.exibirFollows()}render(){return e(s,null,e("button",{class:"btn btn-outline-dark",onClick:()=>this.doFollow()},"Do Follow!"),e("div",{class:"form-group"},e("label",{htmlFor:"input-follow"},"FOLLOW:"),e("textarea",{class:"form-control",ref:t=>this.followText=t,rows:5,id:"input-follow"})))}};class a{constructor(){this.table=new Map}mockData(){let t=new Map;t.set("(","TE'"),t.set("id","TE'"),this.table.set("E",t),t=new Map,t.set("+","+TE'"),t.set(")","&"),t.set("$","&"),this.table.set("E'",t),t=new Map,t.set("id","FT'"),t.set("(","FT'"),this.table.set("T",t),t=new Map,t.set("+","&"),t.set("*","*FT'"),t.set(")","&"),t.set("$","&"),this.table.set("T'",t),t=new Map,t.set("id","id"),t.set("(","(E)"),this.table.set("F",t)}generate(t,e,s){let i;i=t.producao,i.forEach(((t,i)=>{let r,l,o=new Map;if(r=t,l=i,r.indexOf("&")>1){let t=r.split("|");for(let n=0;n<t.length;n++)"&"===t[n]?s.follow.forEach(((t,e)=>{if(l===e){for(let e=0;e<t.length;e++)o.set(t[e],"&");return!1}})):e.first.forEach(((t,e)=>{if(i===e){let e=t.split(",");for(let t=0;t<e.length;t++)o.set(e[t],r.split("|")[0]);return!1}}))}else e.first.forEach(((t,e)=>{if(i===e){let e=t.split(","),s=r.split("|");for(let t=0;t<e.length;t++){const i=e[t];if(s.length>1)for(let e=t;e<s.length;e++)o.set(i,s[e]),e=s.length;else o.set(i,r)}return!1}}));this.table.set(l,o)}))}}const c=class{constructor(e){t(this,e),this.tableHead=[],this.tableRow=[]}buildTable(){this.tableHead=[],this.grammar=new r(this.grammarInput),this.preditiveTable=new a;const t=new l(this.grammar),e=new n(this.grammar);this.preditiveTable.generate(this.grammar,t,e),this.grammar.terminais.forEach((t=>{this.tableHead.push(t)})),this.tableHead.push("$"),this.tableRow=[],this.preditiveTable.table.forEach(((t,e)=>{let s=[];s.push(e);for(let e=0;e<this.tableHead.length;e++)void 0!==typeof t.get(this.tableHead[e])?s.push(t.get(this.tableHead[e])):s.push("");this.tableRow.push(s)}))}render(){return e(s,null,e("h3",null,"Tabela de Predição"),e("button",{class:"btn btn-light mb-1 float-right",onClick:()=>this.buildTable()},"Construir tabela"),e("table",{class:"table table-hover"},e("thead",{class:"thead-dark"},e("tr",null,e("th",{scope:"col"},"#"),e("th",{scope:"col"}),this.tableHead.map((t=>e("th",{scope:"col"},t))))),e("tbody",null,this.tableRow.map(((t,s)=>e("tr",null,e("th",{scope:"row"},s+1),t.map((t=>e("td",null,t)))))))))}};class f{constructor(){this.tableRows=new Array}reconize(t,e,s){this.stackPile=new Array,this.stackPile.push("$"),this.stackPile.push(s.inicioProd),this.grammar=s,this.setUpSymbols(),this.inputPile=new Array,this.setStackPile(t),this.inputPile.push("$");let i=Array();for(i.push(this.stackPile.join("")),i.push(this.inputPile.join("")),this.tableRows.push(i);;)if(!this.executeTask(e))return 0===this.stackPile.length||0===this.inputPile.length}executeTask(t){if(0===this.stackPile.length||0===this.inputPile.length)return!1;if(this.stackPile[this.stackPile.length-1]===this.inputPile[0]){this.stackPile.pop(),this.inputPile.shift();let t=Array();return t.push(this.stackPile.join("")),t.push(this.inputPile.join("")),t.push(""),this.tableRows.push(t),!0}let e=t.table.get(this.stackPile[this.stackPile.length-1]).get(this.inputPile[0]);if(!e){let t=Array();return t.push(`O não Terminal ${this.stackPile[this.stackPile.length-1]} não possui valor corespondente na tabela preditiva para o valor ${this.inputPile[0]}.`),this.tableRows.push(t),!1}{let t=this.stackPile[this.stackPile.length-1]+" -> "+e;this.stackPile.pop(),"&"!==e&&this.setStrackPileReverse(e);let s=Array();s.push(this.stackPile.join("")),s.push(this.inputPile.join("")),s.push(t),this.tableRows.push(s)}return!0}setStrackPileReverse(t){for(;""!==t;)this.symbols.forEach((e=>{t.endsWith(e)&&(t=t.substring(0,t.lastIndexOf(e)),this.stackPile.push(e))}))}setStackPile(t){for(;""!==t;)this.grammar.terminais.forEach((e=>{t.startsWith(e)&&(this.inputPile.push(e),t=t.replace(e,""))}))}setUpSymbols(){this.symbols=new Array,this.symbols=this.symbols.concat(this.grammar.naoTerminais),this.symbols=this.symbols.concat(this.grammar.terminais)}}const u=class{constructor(e){t(this,e),this.inputRecog="i+i*i",this.preditiveTable=new a,this.tableRow=[[]]}reconize(){let t=new r(this.grammar);this.preditiveTable=new a;const e=new l(t),s=new n(t);this.preditiveTable.generate(t,e,s);let i=new f;i.reconize(this.inputRecog,this.preditiveTable,t),this.tableRow=i.tableRows}render(){return e(s,null,e("h3",null,"Tabela de Reconhecimento"),e("div",{class:"form-inline mb-2"},e("div",{class:"form-group"},e("label",{htmlFor:"inputRecognition"},"Entrada:")),e("div",{class:"form-group mx-2"},e("input",{id:"inputRecognition",class:"form-control",type:"text",onInput:t=>this.inputRecog=t.target.value,value:this.inputRecog})),e("button",{class:"btn btn-light",onClick:()=>this.reconize()},"Reconhecer")),e("table",{class:"table table-hover"},e("thead",{class:"thead-dark"},e("tr",null,e("th",{scope:"col"},"Pilha"),e("th",{scope:"col"},"Entrada"),e("th",{scope:"col"},"Saida"))),e("tbody",null,this.tableRow.map((t=>e("tr",null,t.map((t=>e("td",null,t)))))))))}};export{o as app_first,h as app_follow,c as app_prediction_table,u as app_recognition_table}